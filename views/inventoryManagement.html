<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="icon" type="img/png" href="./images/klogopink.png">
        <title>Kytchns</title>
        <link rel="stylesheet" href="./style.css">
    </head>
    <body>
        <div class="header">
            <img src="./images/pinklogo.png" alt="Logo">
            <p>Contact us: info@kytchns.com</p>
        </div>

        <div class="banner">
            <p></p>
        </div>

        <div id="inventoryManagementImg" class="content">
            <div class=contentMain>
                <h1>Control your back-of-house and start meeting your customers out front</h1>

                <div class="features">
                    <p>Our proprietary inventory management solution maps your unique recipes to the transactions made on your Point of Sale (POS) system, to collect real-time data on your ingredient usage. The result is actionable menu pricing and inventory cost-saving recommendations.</p>
                </div>
            </div>
                
            <form onsubmit="submitForm()">
                <h2>Sign up now!</h2>

                <label>*Full Name:
                    <input id="name" type="text" pattern="[A-Za-z ]+" title="No numbers or special characters" required>
                </label>

                <label>Phone Number:
                    <input id="phone" type="text" pattern="[0-9\-\(\) ]+">
                </label>

                <label>*Email:
                    <input id="email" type="email" required>
                </label>

                <label>Zip Code:
                    <input id="zip" type="text" pattern="[0-9]+" title="Numbers only">
                </label>

                <input type="submit" value="Submit">
            </form>
        </div>

        <div class="footer">
            <div>
                <h4>OUR COMPANY</h4>
                <p>Kytchns was formed to help small business restaurants survive and recover in a post COVID-19 world. Small business restaurants already face razor-thin margins, concentrated competition, and high capital costs. Kytchns helps provide small business restaurants with the tools and services needed to navigate a post-pandemic landscape and return to profitability as soon as possible.</p>
            </div>

            <div>
                <h4>SAVE TIME AND MONEY</h4>
                <p>By mapping recipes to each sale, you'll have real-time data on your inventory, consumer preferences, and the true ROI of each ingredient without spending valuable time doing manual inventory checks.</p>
            </div>

            <div>
                <h4>WASTE LESS FOOD</h4>
                <p>By tracking your food costs and waste down to the ingredient, Kytchnâ€™s inventory management solution can predict outages and recommend more efficient orders while reducing food waste.</p>
            </div>
        </div>

        <script>
            let submitForm = ()=>{
                event.preventDefault();

                let data = {
                    name: document.querySelector("#name").value,
                    phone: document.querySelector("#phone").value,
                    email: document.querySelector("#email").value,
                    zip: document.querySelector("#zip").value,
                    page: window.location.pathname.replace("/", "")
                }

                fetch("/lead", {
                    method: "post",
                    headers: {
                        "Content-Type": "application/json;charset=utf-8"
                    },
                    body: JSON.stringify(data)
                })
                    .then((response)=>{
                        if(typeof(response.data) === "string"){
                            showBanner(response.data, true);
                        }else{
                            showBanner("Thanks for signing up.  We will keep you updated with the lastest developments");
                        }
                    })
                    .catch((err)=>{
                        showBanner("Error: something went wrong and we could not save your information", true);
                    });
            }

            let showBanner = (text, isError = false)=>{
                let banner = document.querySelector(".banner");

                if(isError){
                    banner.classList = "banner bannerError";
                }else{
                    banner.classList = "banner bannerSuccess";
                }

                banner.children[0].innerText = text;

                setTimeout(()=>{
                    banner.classList = "banner bannerHidden";
                    banner.children[0].innerText = "";
                }, 5000)
            }
        </script>
    </body>
</html>